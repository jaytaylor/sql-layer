<?xml version="1.0" encoding="UTF-8"?>
<!--

    END USER LICENSE AGREEMENT (“EULA”)

    READ THIS AGREEMENT CAREFULLY (date: 9/13/2011):
    http://www.akiban.com/licensing/20110913

    BY INSTALLING OR USING ALL OR ANY PORTION OF THE SOFTWARE, YOU ARE ACCEPTING
    ALL OF THE TERMS AND CONDITIONS OF THIS AGREEMENT. YOU AGREE THAT THIS
    AGREEMENT IS ENFORCEABLE LIKE ANY WRITTEN AGREEMENT SIGNED BY YOU.

    IF YOU HAVE PAID A LICENSE FEE FOR USE OF THE SOFTWARE AND DO NOT AGREE TO
    THESE TERMS, YOU MAY RETURN THE SOFTWARE FOR A FULL REFUND PROVIDED YOU (A) DO
    NOT USE THE SOFTWARE AND (B) RETURN THE SOFTWARE WITHIN THIRTY (30) DAYS OF
    YOUR INITIAL PURCHASE.

    IF YOU WISH TO USE THE SOFTWARE AS AN EMPLOYEE, CONTRACTOR, OR AGENT OF A
    CORPORATION, PARTNERSHIP OR SIMILAR ENTITY, THEN YOU MUST BE AUTHORIZED TO SIGN
    FOR AND BIND THE ENTITY IN ORDER TO ACCEPT THE TERMS OF THIS AGREEMENT. THE
    LICENSES GRANTED UNDER THIS AGREEMENT ARE EXPRESSLY CONDITIONED UPON ACCEPTANCE
    BY SUCH AUTHORIZED PERSONNEL.

    IF YOU HAVE ENTERED INTO A SEPARATE WRITTEN LICENSE AGREEMENT WITH AKIBAN FOR
    USE OF THE SOFTWARE, THE TERMS AND CONDITIONS OF SUCH OTHER AGREEMENT SHALL
    PREVAIL OVER ANY CONFLICTING TERMS OR CONDITIONS IN THIS AGREEMENT.

-->
<model version="3">
	<object name="type" tableName="akiban_information_schema.types">
		<attr name="name" type="String" />
		<attr name="parameters" type="Integer" />
		<attr name="fixedSize" type="Boolean" />
		<attr name="maxSizeBytes" type="Long" />
		<sql action="read"><![CDATA[
            select 
                type_name, 
                parameters, 
                fixed_size, 
                max_size_bytes 
            from akiban_information_schema.types
        ]]></sql>
		<sql action="write"><![CDATA[insert into akiban_information_schema.types(
                type_name, 
                parameters,
                fixed_size,
                max_size_bytes
            ) values (?, ?, ?, ?)]]></sql>
		<sql action="cleanup"><![CDATA[delete from akiban_information_schema.types]]></sql>
	</object>

	<object name="group" tableName="akiban_information_schema.groups">
		<attr name="groupName" type="String" />
		<sql action="read"><![CDATA[
            select 
                group_name 
            from akiban_information_schema.groups
        ]]></sql>
		<sql action="write"><![CDATA[insert into akiban_information_schema.groups(
                group_name
            ) values (?)]]></sql>
		<sql action="cleanup"><![CDATA[delete from akiban_information_schema.groups]]></sql>
	</object>

	<object name="table" tableName="akiban_information_schema.tables">
		<attr name="schemaName" type="String" />
		<attr name="tableName" type="String" />
		<attr name="tableType" type="String" />
		<attr name="tableId" type="Integer" />
		<attr name="groupName" type="String" />
		<attr name="migrationUsage" type="Integer" />
		<attr name="treeName" type="String" />
		<sql action="read"><![CDATA[
            select
                schema_name,
                table_name,
                table_type,
                table_id,
                group_name,
                migration_usage,
                tree_name
            from akiban_information_schema.tables
        ]]></sql>
		<sql action="write"><![CDATA[insert into akiban_information_schema.tables(
                schema_name,
                table_name,
                table_type,
                table_id,
                group_name,
                migration_usage,
                tree_name
            ) values (?, ?, ?, ?, ?, ?, ?)]]></sql>
		<sql action="cleanup"><![CDATA[delete from akiban_information_schema.tables]]></sql>
	</object>

	<object name="column" tableName="akiban_information_schema.columns">
		<attr name="schemaName" type="String" />
		<attr name="tableName" type="String" />
		<attr name="columnName" type="String" />
		<attr name="position" type="Integer" />
		<attr name="typename" type="String" />
		<attr name="typeParam1" type="Long" />
		<attr name="typeParam2" type="Long" />
		<attr name="nullable" type="Boolean" />
		<attr name="initialAutoIncrementValue" type="Long" />
		<attr name="groupSchemaName" type="String" />
		<attr name="groupTableName" type="String" />
		<attr name="groupColumnName" type="String" />
		<attr name="maxStorageSize" type="Long" />
		<attr name="prefixSize" type="Integer" />
		<attr name="charset" type="String" />
		<attr name="collation" type="String" />
		<sql action="read"><![CDATA[
            select 
                schema_name, 
                table_name, 
                column_name, 
                position, 
                type, 
                type_param_1, 
                type_param_2, 
                nullable, 
                initial_autoinc, 
                group_schema_name, 
                group_table_name, 
                group_column_name,
                max_storage_size,
                prefix_size,
                character_set,
                collation
            from akiban_information_schema.columns
        ]]></sql>
		<sql action="write"><![CDATA[insert into akiban_information_schema.columns(
                schema_name, 
                table_name, 
                column_name, 
                position, 
                type, 
                type_param_1, 
                type_param_2, 
                nullable, 
                initial_autoinc, 
                group_schema_name, 
                group_table_name, 
                group_column_name,
                max_storage_size,
                prefix_size,
                character_set,
                collation
            ) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]]></sql>
		<sql action="cleanup"><![CDATA[delete from akiban_information_schema.columns]]></sql>
	</object>

	<object name="join" tableName="akiban_information_schema.joins">
		<attr name="joinName" type="String" />
		<attr name="parentSchemaName" type="String" />
		<attr name="parentTableName" type="String" />
		<attr name="childSchemaName" type="String" />
		<attr name="childTableName" type="String" />
		<attr name="groupName" type="String" />
		<attr name="joinWeight" type="Integer" />
		<attr name="groupingUsage" type="Integer" />
		<attr name="sourceTypes" type="Integer" />
		<sql action="read"><![CDATA[
            select 
                join_name, 
                parent_schema_name, 
                parent_table_name, 
                child_schema_name, 
                child_table_name, 
                group_name, 
                join_weight,
                grouping_usage,
                source_types
            from akiban_information_schema.joins
        ]]></sql>
		<sql action="write"><![CDATA[insert into akiban_information_schema.joins(
                join_name, 
                parent_schema_name, 
                parent_table_name, 
                child_schema_name, 
                child_table_name, 
                group_name, 
                join_weight,
                grouping_usage,
                source_types
            ) values (?, ?, ?, ?, ?, ?, ?, ?, ?)]]></sql>
		<sql action="cleanup"><![CDATA[delete from akiban_information_schema.joins]]></sql>
	</object>

	<object name="joinColumn" tableName="akiban_information_schema.join_columns">
		<attr name="joinName" type="String" />
		<attr name="parentSchemaName" type="String" />
		<attr name="parentTableName" type="String" />
		<attr name="parentColumnName" type="String" />
		<attr name="childSchemaName" type="String" />
		<attr name="childTableName" type="String" />
		<attr name="childColumnName" type="String" />
		<sql action="read"><![CDATA[
            select 
                join_name, 
                parent_schema_name, 
                parent_table_name, 
                parent_column_name, 
                child_schema_name, 
                child_table_name, 
                child_column_name 
            from akiban_information_schema.join_columns
        ]]></sql>
		<sql action="write"><![CDATA[insert into akiban_information_schema.join_columns(
                join_name, 
                parent_schema_name, 
                parent_table_name, 
                parent_column_name, 
                child_schema_name, 
                child_table_name, 
                child_column_name 
            ) values (?, ?, ?, ?, ?, ?, ?)]]></sql>
		<sql action="cleanup"><![CDATA[delete from akiban_information_schema.join_columns]]></sql>
	</object>

	<object name="index" tableName="akiban_information_schema.indexes">
		<attr name="schemaName" type="String" />
		<attr name="tableName" type="String" />
		<attr name="indexName" type="String" />
		<attr name="indexType" type="String" />
		<attr name="indexId" type="Integer" />
		<attr name="constraint" type="String" />
		<attr name="unique" type="Boolean" />
		<attr name="treeName" type="String" />
		<sql action="read"><![CDATA[
            select 
                schema_name, 
                table_name, 
                index_name,
                index_type,
                index_id, 
                table_constraint, 
                is_unique,
                tree_name
            from akiban_information_schema.indexes
        ]]></sql>
		<sql action="write"><![CDATA[insert into akiban_information_schema.indexes(
                schema_name,
                table_name,
                index_name,
                index_type,
                index_id, 
                table_constraint, 
                is_unique,
                tree_name
            ) values (?, ?, ?, ?, ?, ?, ?, ?)]]></sql>
		<sql action="cleanup"><![CDATA[delete from akiban_information_schema.indexes]]></sql>
	</object>

	<object name="indexColumn" tableName="akiban_information_schema.index_columns">
		<attr name="schemaName" type="String" />
		<attr name="tableName" type="String" />
		<attr name="indexName" type="String" />
		<attr name="indexType" type="String" />
		<attr name="columnName" type="String" />
		<attr name="position" type="Integer" />
		<attr name="ascending" type="Boolean" />
		<attr name="indexedLength" type="Integer" />
		<sql action="read"><![CDATA[
            select 
                schema_name, 
                table_name,
                index_name,
                index_type,
                column_name, 
                ordinal_position, 
                is_ascending,
                indexed_length
            from akiban_information_schema.index_columns
        ]]></sql>
		<sql action="write"><![CDATA[insert into akiban_information_schema.index_columns(
                schema_name, 
                table_name, 
                index_name,
                index_type,
                column_name, 
                ordinal_position, 
                is_ascending,
                indexed_length
            ) values (?, ?, ?, ?, ?, ?, ?, ?)]]></sql>
		<sql action="cleanup"><![CDATA[delete from akiban_information_schema.index_columns]]></sql>
	</object>

</model>
